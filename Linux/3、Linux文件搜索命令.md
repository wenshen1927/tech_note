#三、Linux文件搜索命令

[TOC]

- 文件搜索命令locate(搜索速度快)
- 命令搜索命令whereis与which
- 文件搜索命令find
- 字符串搜索命令grep
- find命令与grep命令的区别

###1、locate命令

- locate 文件名

  在后台数据库中按文件名搜索，搜索速度快

- /var/lib/mlocate

   locate命令所搜索的后台数据库

  这个数据库一天一更新更新

- updatedb

  更新数据库

- 优点：搜索速度快

- 缺点：

  - 只能按照文件名搜索，相对于find命令功能比较弱；

  - 某些文件夹下面的文件不搜索，具体看/etc/updatedb.conf配置文件(这个文件对于whereis 也适用)

    <img src="/Users/zhangyanan/Library/Application Support/typora-user-images/image-20190806224307953.png" style="width:400px">



###2、whereis 命令 和which

不能查到shell自带的命令，只能找到系统后来安装的命令比如/usr/bin；shell命令是系统自带的，比如cd命令

2.1 whereis 命令名

- 搜索命令所在路径及帮助文档所在位置

- 选项：

  - -b ：只查找可执行命令
  - -m ：只查找帮助文件

- tips：whoami 我是谁？当前用户是谁；

  ​	whatis + 命令 :这命令是干啥的

2.2 which 命令名

- 搜索命令所在路径及别名，和whereis几乎一样

2.3 PATH环境变量

- PATH环境变量：定义的是系统搜索命令的路径，方便用户执行命令，当用户执行某一个命令时，它会在$PATH下的目录里搜索命令相关的目录；
- 如果自己写的脚本，没有加到$PATH里面，那么我们执行的时候就要写出绝对路径执行



###3、find命令

最强大的搜索命令，命令参数多。

- find [搜索范围] [搜索条件]
  - 搜索文件
- 如find / -name install.log
  - 避免大范围搜索，会非常耗费系统资源，这里就是从根目录/搜索，范围太大，搜索缓慢；
  - find是在系统当中搜索符合条件的文件名。如果需要匹配，使用通配符匹配，==通配符是完全匹配==：搜的内容必须与文件完全一致，如果需要模糊查询需要通配符；
- linux中的通配符（主要）：
  - \*      匹配任意多个内容 
  - ？    匹配任意一个字符
  - []     匹配任意一个中括号内的字符  find /root -name "ab[cd]"  ： 查找 abc文件何abd文件
- 常用的find 写法（find 参数太多了，只找一些常用的）：
  - find /root **-iname** install.log  :  不区分大小写
  - find  /root  **-user**  root :  按照所有者搜索
  - find /root **-nouser** :（常用）查找没有所有者的文件(一般指垃圾文件 ， /proc  /sys 两个文件下的文件例外，外来文件也有可能没有所有者)
  - find  /var/log  **-mtime**  +10    :  查找10天前修改的文件(查日志)
    - -10    10天内修改的文件
    - 10      10天当天修改的文件
    - +10     10天前修改的文件
    - atime   文件访问时间
    - ctime   改变文件属性
    - mtime  修改文件内容
  - find .  **-size**  25k : 查找文件大小是25kb的文件
    - -25k    小于25kb的文件
    -  25k    等于25kb的文件
    - +25k   大于25kb的文件
    - 1M(注意是大写M)
  - find  .  **-inum**   262422   :  查找i节点是  262422  的文件
  - find  /etc -size +20k  **-a**  -size  -50k
    - 查找/etc目录下，大于20k并小于50k的文件
    - -a   and   逻辑与，两个条件都满足
    - -o     or     逻辑或，两个条件满一个就可以
  - find /etc  -size +20k  **-a**  size  -50k  **-exec** ls -lh  {} \;
    - 查找/etc目录下，大于20k并且小于50k的文件，并显示详细信息
    - -exec/-ok  命令 {} \;  对搜索结果执行命令操；-exec 后面 {} \是标准格式

###4、grep命令(搜索字符串命令)

- grep [选项]  字符串  文件名： 在文件当中匹配符合条件的字符串
- 选项：
  - -i   忽略大小写
  - -v  排除指定字符串



- find命令与grep命令的区别：
  - find 命令： 在系统当中搜索符合条件的文件名，如果需要匹配，使用通配符匹配，通配符是**完全匹配(文件名与搜索对象必须一模一样)**
  - grep命令：在文件当中搜索符合条件的字符串，如果需要匹配，使用正则表达式进行匹配，正则表达式是**包含匹配(只要包含要搜索的字符串即可)**

